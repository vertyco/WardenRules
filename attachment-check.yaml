name: medialink-check
rank: 2
priority: 1
event: [on-message, on-message-edit]
if:
  - if-any:
    - message-has-attachment: true
  - if-not:
     - user-has-any-role-in: [877012889863606323, 914311290099499028]
     - category-matches-any: [732016517872484394]
do:
  - delete-user-message:
  - send-message: [$channel_id, $user_mention Sorry, you need to be at least level 1 to send attachments.]
  - delete-last-message-sent-after: 20 seconds
  - notify-staff:
      content: "$user_name posted a message in $channel_mention that contained [attachment]($attachment_url)\nMessage content, if any:\n```$message ```"
      title: "Attachment Content Removed"
      add_ctx_fields: true
      no_repeat_for: 30 seconds
      no_repeat_key: $rule_name-$user_id